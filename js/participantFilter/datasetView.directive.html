<form name="form" class="form-inline" novalidate>
  <table class="table table-striped table-condensed">
    <tbody>
      <tr ng-if="!dataset.DemographicData">
        <th class="col-xs-1 text-right" scope="row">
          <label class="control-label form-control-static">Record Date</label>
        </th>
        <td>
          <input class="form-control" type="date" ng-model="entry.Date" required autofocus>
        </td>
        <td ng-class="{'col-xs-1': !dataset.DemographicData, 'border-left': !$first}"
            ng-repeat="row in participant.dataSets[dataset.Name]">
          <span class="form-control-static labking-form-element text-with-newlines"
                ng-bind="getValueAsDate(row.date)"></span>
        </td>
      </tr>

      <tr ng-repeat="column in dataset.columns">
        <th class="col-xs-1 text-right" scope="row">
          <label class="control-label form-control-static" ng-bind="column.Label"></label>
        </th>
        <td class="col-xs-4" ng-show="isFormShown()">
          <select ng-model="$parent.$parent.entry[column.Name]"
                  ng-if="column.LookupQuery"
                  class="form-control">
            <option ng-repeat="option in lookups[column.LookupQuery].rows" value="{{option.Key}}">
              {{option.Label}}
            </option>
          </select>

          <input class="form-control" type="number"
              ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#int'"
              ng-pattern="/^\d*$/"
              ng-model="$parent.$parent.entry[column.Name]"
              placeholder="Requires whole numbers only">

          <input class="form-control" type="number"
              ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#double'"
              ng-pattern="/^\d{0,}\.{0,1}\d{0,}$/"
              ng-model="$parent.$parent.entry[column.Name]"
              placeholder="Decimal places allowed"
              step="any">


          <input class="form-control" type="date"
              ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#dateTime'"
              ng-model="$parent.$parent.entry[column.Name]">

          <div class="checkbox"  ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#boolean'">
            <input type="checkbox"
                 ng-model="$parent.$parent.entry[column.Name]"
                 ui-indeterminate="$parent.$parent.entry[column.Name] === undefined">
          </div>

          <input class="form-control" type="text"
              ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#string'"
              ng-model="$parent.$parent.entry[column.Name]">

          <textarea class="form-control"
              ng-if="!column.LookupQuery && column.RangeURI === 'http://www.w3.org/2001/XMLSchema#multiLine'"
              ng-model="$parent.$parent.entry[column.Name]"></textarea>

        </td>

        <td ng-class="{'col-xs-1': !dataset.DemographicData, 'border-left': !$first}"
            ng-repeat="row in participant.dataSets[dataset.Name]">
          <span class="form-control-static labking-form-element text-with-newlines"
                ng-bind="getValue(row, column)"></span>
        </td>
      </tr>

      <tr ng-show="isFormShown()">
        <td/>
        <td>
          <div class="btn-toolbar" role="toolbar" aria-label="Form controls">
            <input type="button" class="btn" ng-click="reset(form)" value="Reset" />
            <input type="submit" class="btn btn-success" ng-click="createEntry(entry)" value="Save" />
          </div>
        </td>
        <td ng-repeat="row in participant.dataSets[dataset.Name]"/>
      </tr>
    </tbody>
  </table>
</form>
